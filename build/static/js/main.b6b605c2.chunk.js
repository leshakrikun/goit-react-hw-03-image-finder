(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{11:function(e,t,a){e.exports={imageGallery:"imageGallery_imageGallery__2gftv"}},13:function(e,t,a){e.exports={button:"button_button__3kcfq"}},20:function(e,t,a){},22:function(e,t,a){},3:function(e,t,a){e.exports={searchbar:"searchbar_searchbar__2rpqY",searchForm:"searchbar_searchForm__2mQCA",searchFormButton:"searchbar_searchFormButton__9Hz2S",searchFormButtonLabel:"searchbar_searchFormButtonLabel__jZk50",searchFormInput:"searchbar_searchFormInput__3nsLK"}},44:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(4),c=a.n(r),s=(a(20),a(21),a(8)),l=a(9),i=a(10),h=a(15),d=a(14),m=(a(22),a(3)),u=a.n(m),g=a(0);var b=function(e){var t=e.handleSubmit,a=e.handleChange;return Object(g.jsx)("header",{className:u.a.searchbar,children:Object(g.jsxs)("form",{onSubmit:t,className:u.a.searchForm,children:[Object(g.jsx)("button",{type:"submit",className:u.a.searchFormButton,children:Object(g.jsx)("span",{className:u.a.searchFormButtonLabel,children:"Search"})}),Object(g.jsx)("input",{className:u.a.searchFormInput,type:"text",onChange:a,placeholder:"Search images and photos"})]})})},j=a(11),f=a.n(j);function p(e){var t=e.children;return Object(g.jsx)("ul",{className:f.a.imageGallery,children:t})}var v=a(6),y=a.n(v);function _(e){var t=e.photos,a=e.onClick;return Object(g.jsx)(g.Fragment,{children:t.map((function(e){return Object(g.jsx)("li",{className:y.a.imageGalleryItem,onClick:a,children:Object(g.jsx)("img",{src:e.webformatURL,lowsrc:e.largeImageURL,alt:e.tags,className:y.a.imageGalleryItemImage})},e.id)}))})}var O=a(12),w=a.n(O),x=0;var k={FetchPhoto:function(e){return x+=1,fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(x,"&key=").concat("21938998-67fd96e5d4868b12a769f8729","&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){if(e.ok)return e.json()}))},resetPage:function(){x=0},page:x},C=a(13),I=a.n(C);function F(e){var t=e.onClick;return Object(g.jsx)("button",{onClick:t,className:I.a.button,id:"more",children:"Load more"})}var M=a(7),S=a.n(M),N=document.querySelector("#modal-root");function G(e){var t=e.onChange,a=e.state,n=a.largeImage,o=a.photos.tags;return Object(r.createPortal)(Object(g.jsx)("div",{className:S.a.overlay,children:Object(g.jsx)("div",{className:S.a.modal,onChange:t,children:Object(g.jsx)("img",{src:n,alt:o})})}),N)}var L=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={photos:[],errors:null,loading:!1,search:"",showModal:!1,largeImage:""},e.handleKeyDown=function(t){"Escape"===t.code&&e.toggleModal()},e.handleMouseClick=function(t){e.state.showModal&&"DIV"===t.target.tagName&&e.toggleModal()},e.toggleModal=function(){e.setState({showModal:!1})},e.handleSubmit=function(t){t.preventDefault(),k.resetPage(),e.setState({loading:!0});var a=t.target;k.FetchPhoto(e.state.search).then((function(t){e.setState({photos:t.hits,loading:!1})})).catch((function(t){return e.setState({errors:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",loading:!1})})),a.reset()},e.handleChange=function(t){e.setState({search:t.target.value})},e.onMoreClick=function(){k.FetchPhoto(e.state.search).then((function(t){e.setState({photos:[].concat(Object(s.a)(e.state.photos),Object(s.a)(t.hits))})})).catch((function(t){return e.setState({errors:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441",loading:!1})})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.handleOpenModal=function(t){"LI"===t.currentTarget.tagName&&e.setState({showModal:!e.state.showModal,largeImage:t.target.lowsrc})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleMouseClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleMouseClick)}},{key:"render",value:function(){var e=this.state,t=e.showModal,a=e.photos,n=e.loading,o=e.errors;return Object(g.jsxs)(g.Fragment,{children:[t&&Object(g.jsx)(G,{onChange:this.handleKeyDown,state:this.state}),Object(g.jsx)(b,{handleSubmit:this.handleSubmit,handleChange:this.handleChange}),n&&Object(g.jsx)(w.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3,className:"loader"}),Object(g.jsxs)("div",{className:"container",children:[o&&Object(g.jsx)("h2",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430"}),Object(g.jsx)(p,{children:Object(g.jsx)(_,{photos:a,onClick:this.handleOpenModal})}),0!==a.length&&a.length%12===0&&Object(g.jsx)(F,{onClick:this.onMoreClick})]})]})}}]),a}(o.a.Component);c.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(L,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={imageGalleryItem:"imageGalleryItem_imageGalleryItem__fQHHh",imageGalleryItemImage:"imageGalleryItem_imageGalleryItemImage__1zCtt"}},7:function(e,t,a){e.exports={overlay:"modal_overlay__3iQKk",modal:"modal_modal__3N83j"}}},[[44,1,2]]]);
//# sourceMappingURL=main.b6b605c2.chunk.js.map